(function(H){typeof define=="function"&&define.amd?define(H):H()})(function(){"use strict";var H=1.525,it=function(t){return function(e){return 1-t(1-e)}},mt=function(t){return function(e){return e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2}},xe=it,Ee=function(t){return function(e){return Math.pow(e,t)}},_t=function(t){return function(e){return e*e*((t+1)*e-t)}},Me=function(t){var e=_t(t);return function(r){return(r*=2)<1?.5*e(r):.5*(2-Math.pow(2,-10*(r-1)))}},Gt=function(t){return t},pt=Ee(2),Wt=it(pt),Pe=mt(pt),Xt=function(t){return 1-Math.sin(Math.acos(t))},Yt=it(Xt),Se=mt(Yt),ht=_t(H),$e=it(ht),Fe=mt(ht),Ie=Me(H);const Ht=1/60*1e3,Re=typeof performance<"u"?()=>performance.now():()=>Date.now(),Ut=typeof window<"u"?t=>window.requestAnimationFrame(t):t=>setTimeout(()=>t(Re()),Ht);function je(t){let e=[],r=[],n=0,a=!1,i=!1;const o=new WeakSet,s={schedule:(f,u=!1,d=!1)=>{const m=d&&a,y=m?e:r;return u&&o.add(f),y.indexOf(f)===-1&&(y.push(f),m&&a&&(n=e.length)),f},cancel:f=>{const u=r.indexOf(f);u!==-1&&r.splice(u,1),o.delete(f)},process:f=>{if(a){i=!0;return}if(a=!0,[e,r]=[r,e],r.length=0,n=e.length,n)for(let u=0;u<n;u++){const d=e[u];d(f),o.has(d)&&(s.schedule(d),t())}a=!1,i&&(i=!1,s.process(f))}};return s}const Ne=40;let gt=!0,U=!1,yt=!1;const k={delta:0,timestamp:0},q=["read","update","preRender","render","postRender"],ot=q.reduce((t,e)=>(t[e]=je(()=>U=!0),t),{}),ut=q.reduce((t,e)=>{const r=ot[e];return t[e]=(n,a=!1,i=!1)=>(U||Le(),r.schedule(n,a,i)),t},{});q.reduce((t,e)=>(t[e]=ot[e].cancel,t),{}),q.reduce((t,e)=>(t[e]=()=>ot[e].process(k),t),{});const Ve=t=>ot[t].process(k),kt=t=>{U=!1,k.delta=gt?Ht:Math.max(Math.min(t-k.timestamp,Ne),1),k.timestamp=t,yt=!0,q.forEach(Ve),yt=!1,U&&(gt=!1,Ut(kt))},Le=()=>{U=!0,gt=!0,yt||Ut(kt)};var st=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function De(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qt="Expected a function",zt=NaN,Be="[object Symbol]",_e=/^\s+|\s+$/g,Ge=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,Xe=/^0o[0-7]+$/i,Ye=parseInt,He=typeof st=="object"&&st&&st.Object===Object&&st,Ue=typeof self=="object"&&self&&self.Object===Object&&self,ke=He||Ue||Function("return this")(),qe=Object.prototype,ze=qe.toString,Ke=Math.max,Ze=Math.min,bt=function(){return ke.Date.now()};function Je(t,e,r){var n,a,i,o,s,f,u=0,d=!1,m=!1,y=!0;if(typeof t!="function")throw new TypeError(qt);e=Kt(e)||0,ft(r)&&(d=!!r.leading,m="maxWait"in r,i=m?Ke(Kt(r.maxWait)||0,e):i,y="trailing"in r?!!r.trailing:y);function w(c){var l=n,T=a;return n=a=void 0,u=c,o=t.apply(T,l),o}function P(c){return u=c,s=setTimeout(p,e),d?w(c):o}function M(c){var l=c-f,T=c-u,F=e-l;return m?Ze(F,i-T):F}function h(c){var l=c-f,T=c-u;return f===void 0||l>=e||l<0||m&&T>=i}function p(){var c=bt();if(h(c))return v(c);s=setTimeout(p,M(c))}function v(c){return s=void 0,y&&n?w(c):(n=a=void 0,o)}function b(){s!==void 0&&clearTimeout(s),u=0,n=f=a=s=void 0}function A(){return s===void 0?o:v(bt())}function g(){var c=bt(),l=h(c);if(n=arguments,a=this,f=c,l){if(s===void 0)return P(f);if(m)return s=setTimeout(p,e),w(f)}return s===void 0&&(s=setTimeout(p,e)),o}return g.cancel=b,g.flush=A,g}function Qe(t,e,r){var n=!0,a=!0;if(typeof t!="function")throw new TypeError(qt);return ft(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),Je(t,e,{leading:n,maxWait:e,trailing:a})}function ft(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function tr(t){return!!t&&typeof t=="object"}function er(t){return typeof t=="symbol"||tr(t)&&ze.call(t)==Be}function Kt(t){if(typeof t=="number")return t;if(er(t))return zt;if(ft(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ft(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(_e,"");var r=We.test(t);return r||Xe.test(t)?Ye(t.slice(2),r?2:8):Ge.test(t)?zt:+t}var rr=Qe;const Zt=De(rr);/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var wt=function(t,e){return wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a])},wt(t,e)};function nr(t,e){wt(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var C=function(){return C=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},C.apply(this,arguments)};function Ot(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function ar(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),a=0,e=0;e<r;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}var Jt=function(t,e){return function(r){return Math.max(Math.min(r,e),t)}},z=function(t){return t%1?Number(t.toFixed(5)):t},Tt=/(-)?(\d[\d\.]*)/g,ct=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,Qt=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,O={test:function(t){return typeof t=="number"},parse:parseFloat,transform:function(t){return t}},te=C(C({},O),{transform:Jt(0,1)});C(C({},O),{default:1});var K=function(t){return{test:function(e){return typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1},parse:parseFloat,transform:function(e){return""+e+t}}},ir=K("deg"),W=K("%"),or=K("px"),ur=K("vh"),sr=K("vw");C(C({},W),{parse:function(t){return W.parse(t)/100},transform:function(t){return W.transform(t*100)}});var fr=function(t){return t.substring(t.indexOf("(")+1,t.lastIndexOf(")"))},cr=Jt(0,255),Ct=function(t){return t.red!==void 0},At=function(t){return t.hue!==void 0};function lr(t){return fr(t).replace(/(,|\/)/g," ").split(/ \s*/)}var ee=function(t){return function(e){if(typeof e!="string")return e;for(var r={},n=lr(e),a=0;a<4;a++)r[t[a]]=n[a]!==void 0?parseFloat(n[a]):1;return r}},dr=function(t){var e=t.red,r=t.green,n=t.blue,a=t.alpha,i=a===void 0?1:a;return"rgba("+e+", "+r+", "+n+", "+i+")"},vr=function(t){var e=t.hue,r=t.saturation,n=t.lightness,a=t.alpha,i=a===void 0?1:a;return"hsla("+e+", "+r+", "+n+", "+i+")"},xt=C(C({},O),{transform:function(t){return Math.round(cr(t))}});function Et(t,e){return t.startsWith(e)&&Qt.test(t)}var Z={test:function(t){return typeof t=="string"?Et(t,"rgb"):Ct(t)},parse:ee(["red","green","blue","alpha"]),transform:function(t){var e=t.red,r=t.green,n=t.blue,a=t.alpha,i=a===void 0?1:a;return dr({red:xt.transform(e),green:xt.transform(r),blue:xt.transform(n),alpha:z(te.transform(i))})}},J={test:function(t){return typeof t=="string"?Et(t,"hsl"):At(t)},parse:ee(["hue","saturation","lightness","alpha"]),transform:function(t){var e=t.hue,r=t.saturation,n=t.lightness,a=t.alpha,i=a===void 0?1:a;return vr({hue:Math.round(e),saturation:W.transform(z(r)),lightness:W.transform(z(n)),alpha:z(te.transform(i))})}},Mt=C(C({},Z),{test:function(t){return typeof t=="string"&&Et(t,"#")},parse:function(t){var e="",r="",n="";return t.length>4?(e=t.substr(1,2),r=t.substr(3,2),n=t.substr(5,2)):(e=t.substr(1,1),r=t.substr(2,1),n=t.substr(3,1),e+=e,r+=r,n+=n),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),lt={test:function(t){return typeof t=="string"&&Qt.test(t)||Ct(t)||At(t)},parse:function(t){return Z.test(t)?Z.parse(t):J.test(t)?J.parse(t):Mt.test(t)?Mt.parse(t):t},transform:function(t){return Ct(t)?Z.transform(t):At(t)?J.transform(t):t}},Pt="${c}",re="${n}",mr=function(t){return typeof t=="number"?0:t},Q={test:function(t){if(typeof t!="string"||!isNaN(t))return!1;var e=0,r=t.match(Tt),n=t.match(ct);return r&&(e+=r.length),n&&(e+=n.length),e>0},parse:function(t){var e=t,r=[],n=e.match(ct);n&&(e=e.replace(ct,Pt),r.push.apply(r,n.map(lt.parse)));var a=e.match(Tt);return a&&r.push.apply(r,a.map(O.parse)),r},createTransformer:function(t){var e=t,r=0,n=t.match(ct),a=n?n.length:0;if(n)for(var i=0;i<a;i++)e=e.replace(n[i],Pt),r++;var o=e.match(Tt),s=o?o.length:0;if(o)for(var i=0;i<s;i++)e=e.replace(o[i],re),r++;return function(f){for(var u=e,d=0;d<r;d++)u=u.replace(d<a?Pt:re,d<a?lt.transform(f[d]):z(f[d]));return u}},getAnimatableNone:function(t){var e=Q.parse(t),r=Q.createTransformer(t);return r(e.map(mr))}},pr=function(){},St=0,ne=typeof window<"u"&&window.requestAnimationFrame!==void 0?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),r=Math.max(0,16.7-(e-St));St=e+r,setTimeout(function(){return t(St)},r)},hr=function(t){var e=[],r=[],n=0,a=!1,i=0,o=new WeakSet,s=new WeakSet,f={cancel:function(u){var d=r.indexOf(u);o.add(u),d!==-1&&r.splice(d,1)},process:function(u){var d;if(a=!0,d=[r,e],e=d[0],r=d[1],r.length=0,n=e.length,n){var m;for(i=0;i<n;i++)m=e[i],m(u),s.has(m)===!0&&!o.has(m)&&(f.schedule(m),t(!0))}a=!1},schedule:function(u,d,m){d===void 0&&(d=!1),m===void 0&&(m=!1);var y=m&&a,w=y?e:r;o.delete(u),d&&s.add(u),w.indexOf(u)===-1&&(w.push(u),y&&(n=e.length))}};return f},gr=40,ae=1/60*1e3,dt=!0,tt=!1,$t=!1,X={delta:0,timestamp:0},vt=["read","update","preRender","render","postRender"],yr=function(t){return tt=t},Ft=vt.reduce(function(t,e){return t[e]=hr(yr),t},{}),L=vt.reduce(function(t,e){var r=Ft[e];return t[e]=function(n,a,i){return a===void 0&&(a=!1),i===void 0&&(i=!1),tt||wr(),r.schedule(n,a,i),n},t},{}),D=vt.reduce(function(t,e){return t[e]=Ft[e].cancel,t},{}),br=function(t){return Ft[t].process(X)},ie=function(t){tt=!1,X.delta=dt?ae:Math.max(Math.min(t-X.timestamp,gr),1),dt||(ae=X.delta),X.timestamp=t,$t=!0,vt.forEach(br),$t=!1,tt&&(dt=!1,ne(ie))},wr=function(){tt=!0,dt=!0,$t||ne(ie)},Or=function(){return X},oe=function(t){return typeof t=="number"},Tr=function(t){return function(e,r,n){return n!==void 0?t(e,r,n):function(a){return t(e,r,a)}}},Cr=function(t,e,r){return Math.min(Math.max(r,t),e)},It=Tr(Cr),Ar=function(t,e,r){var n=e-t;return n===0?1:(r-t)/n},et=function(t,e,r){return-r*t+r*e+t};/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var Rt=function(){return Rt=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Rt.apply(this,arguments)},xr=function(t,e,r){var n=t*t,a=e*e;return Math.sqrt(Math.max(0,r*(a-n)+n))},Er=[Mt,Z,J],ue=function(t){return Er.find(function(e){return e.test(t)})},se=function(t,e){var r=ue(t),n=ue(e);pr(r.transform===n.transform);var a=r.parse(t),i=n.parse(e),o=Rt({},a),s=r===J?et:xr;return function(f){for(var u in o)u!=="alpha"&&(o[u]=s(a[u],i[u],f));return o.alpha=et(a.alpha,i.alpha,f),r.transform(o)}},Mr=function(t,e){return function(r){return e(t(r))}},fe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(Mr)};function Pr(t,e){return oe(t)?function(r){return et(t,e,r)}:lt.test(t)?se(t,e):le(t,e)}var Sr=function(t,e){var r=t.slice(),n=r.length,a=t.map(function(i,o){return Pr(i,e[o])});return function(i){for(var o=0;o<n;o++)r[o]=a[o](i);return r}};function ce(t){for(var e=Q.parse(t),r=e.length,n=0,a=0,i=0,o=0;o<r;o++)n||typeof e[o]=="number"?n++:e[o].hue!==void 0?i++:a++;return{parsed:e,numNumbers:n,numRGB:a,numHSL:i}}var le=function(t,e){var r=Q.createTransformer(e),n=ce(t),a=ce(e);return fe(Sr(n.parsed,a.parsed),r)},jt=function(t,e){return oe(t)?t/(1e3/e):0},de=function(t,e){return e?t*(1e3/e):0};It(0,1);var $r=function(){function t(e){e===void 0&&(e={}),this.props=e}return t.prototype.applyMiddleware=function(e){return this.create(C(C({},this.props),{middleware:this.props.middleware?ar([e],this.props.middleware):[e]}))},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.length===1?e[0]:fe.apply(void 0,e);return this.applyMiddleware(function(a){return function(i){return a(n(i))}})},t.prototype.while=function(e){return this.applyMiddleware(function(r,n){return function(a){return e(a)?r(a):n()}})},t.prototype.filter=function(e){return this.applyMiddleware(function(r){return function(n){return e(n)&&r(n)}})},t}(),ve=function(){function t(e,r){var n=this,a=e.middleware,i=e.onComplete;this.isActive=!0,this.update=function(o){n.observer.update&&n.updateObserver(o)},this.complete=function(){n.observer.complete&&n.isActive&&n.observer.complete(),n.onComplete&&n.onComplete(),n.isActive=!1},this.error=function(o){n.observer.error&&n.isActive&&n.observer.error(o),n.isActive=!1},this.observer=r,this.updateObserver=function(o){return r.update(o)},this.onComplete=i,r.update&&a&&a.length&&a.forEach(function(o){return n.updateObserver=o(n.updateObserver,n.complete)})}return t}(),Fr=function(t,e,r){var n=e.middleware;return typeof t=="function"?new ve({middleware:n,onComplete:r},{update:t}):new ve({middleware:n,onComplete:r},t)},Ir=function(t){nr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.create=function(r){return new e(r)},e.prototype.start=function(r){r===void 0&&(r={});var n=!1,a={stop:function(){}},i=this.props,o=i.init,s=Ot(i,["init"]),f=Fr(r,s,function(){n=!0,a.stop()}),u=o(f);return a=u?C(C({},a),u):a,r.registerParent&&r.registerParent(a),n&&a.stop(),a},e}($r),B=function(t){return new Ir({init:t})},me=function(t){var e=t.getCount,r=t.getFirst,n=t.getOutput,a=t.mapApi,i=t.setProp,o=t.startActions;return function(s){return B(function(f){var u=f.update,d=f.complete,m=f.error,y=e(s),w=n(),P=function(){return u(w)},M=0,h=o(s,function(p,v){var b=!1;return p.start({complete:function(){b||(b=!0,M++,M===y&&L.update(d))},error:m,update:function(A){i(w,v,A),L.update(P,!1,!0)}})});return Object.keys(r(h)).reduce(function(p,v){return p[v]=a(h,v),p},{})})}},Rr=me({getOutput:function(){return{}},getCount:function(t){return Object.keys(t).length},getFirst:function(t){return t[Object.keys(t)[0]]},mapApi:function(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return Object.keys(t).reduce(function(a,i){var o;return t[i][e]&&(r[0]&&r[0][i]!==void 0?a[i]=t[i][e](r[0][i]):a[i]=(o=t[i])[e].apply(o,r)),a},{})}},setProp:function(t,e,r){return t[e]=r},startActions:function(t,e){return Object.keys(t).reduce(function(r,n){return r[n]=e(t[n],n),r},{})}}),jr=me({getOutput:function(){return[]},getCount:function(t){return t.length},getFirst:function(t){return t[0]},mapApi:function(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.map(function(a,i){if(a[e])return Array.isArray(r[0])?a[e](r[0][i]):a[e].apply(a,r)})}},setProp:function(t,e,r){return t[e]=r},startActions:function(t,e){return t.map(function(r,n){return e(r,n)})}}),Nr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return jr(t)},Vr=function(t){var e=Object.keys(t),r=function(i,o){return i!==void 0&&!t[o](i)},n=function(i){return e.reduce(function(o,s){return r(i[s],s)&&o.push(s),o},[])},a=function(i){return i&&e.some(function(o){return r(i[o],o)})};return{getVectorKeys:n,testVectorProps:a}},Lr=[or,W,ir,ur,sr],Nt=function(t){return Lr.find(function(e){return e.test(t)})},Dr=function(t){return!!Nt(t)},pe=function(t,e){return t(e)},Br=function(t){return function(e,r){return e[r]=e[r][t],e}},_r=function(t,e,r){var n=r[0],a=e[n].map(function(i,o){var s=r.reduce(Br(o),C({},e));return Vt(i)(t,s)});return Nr.apply(void 0,a)},Gr=function(t){return function(e,r){return e[r]=e[r][t],e}},Wr=function(t,e,r){var n=r[0],a=Object.keys(e[n]).reduce(function(i,o){var s=r.reduce(Gr(o),C({},e));return i[o]=Vt(e[n][o])(t,s),i},{});return Rr(a)},Xr=function(t,e){var r=e.from,n=e.to,a=Ot(e,["from","to"]),i=Nt(r)||Nt(n),o=i.transform,s=i.parse;return t(C(C({},a),{from:typeof r=="string"?s(r):r,to:typeof n=="string"?s(n):n})).pipe(o)},he=function(t){return function(e,r){var n=r.from,a=r.to,i=Ot(r,["from","to"]);return e(C(C({},i),{from:0,to:1})).pipe(t(n,a))}},Yr=he(se),Hr=he(le),rt=function(t,e){var r=Vr(e),n=r.testVectorProps,a=r.getVectorKeys,i=function(o){var s=n(o);if(!s)return t(o);var f=a(o),u=f[0],d=o[u];return Vt(d)(t,o,f)};return i},Vt=function(t){return typeof t=="number"?pe:Array.isArray(t)?_r:Dr(t)?Xr:lt.test(t)?Yr:Q.test(t)?Hr:typeof t=="object"?Wr:pe},ge=function(t){return t===void 0&&(t={}),B(function(e){var r=e.complete,n=e.update,a=t.velocity,i=a===void 0?0:a,o=t.from,s=o===void 0?0:o,f=t.power,u=f===void 0?.8:f,d=t.timeConstant,m=d===void 0?350:d,y=t.restDelta,w=y===void 0?.5:y,P=t.modifyTarget,M=0,h=u*i,p=s+h,v=typeof P>"u"?p:P(p);v!==p&&(h=v-s);var b=L.update(function(A){var g=A.delta;M+=g;var c=-h*Math.exp(-M/m),l=c>w||c<-w,T=l?v+c:v;n(T),l||(D.update(b),r())},!0);return{stop:function(){return D.update(b)}}})};O.test,O.test;var ye=function(t){return t===void 0&&(t={}),B(function(e){var r=e.update,n=e.complete,a=t.velocity,i=a===void 0?0:a,o=t.from,s=o===void 0?0:o,f=t.to,u=f===void 0?0:f,d=t.stiffness,m=d===void 0?100:d,y=t.damping,w=y===void 0?10:y,P=t.mass,M=P===void 0?1:P,h=t.restSpeed,p=h===void 0?.01:h,v=t.restDelta,b=v===void 0?.01:v,A=i?-(i/1e3):0,g=0,c=u-s,l=s,T=l,F=L.update(function(V){var j=V.delta;g+=j;var S=w/(2*Math.sqrt(m*M)),$=Math.sqrt(m/M)/1e3;if(T=l,S<1){var I=Math.exp(-S*$*g),x=$*Math.sqrt(1-S*S);l=u-I*((A+S*$*c)/x*Math.sin(x*g)+c*Math.cos(x*g))}else{var I=Math.exp(-$*g);l=u-I*(c+(A+$*c)*g)}i=de(l-T,j);var N=Math.abs(i)<=p,E=Math.abs(u-l)<=b;N&&E?(l=u,r(l),D.update(F),n()):r(l)},!0);return{stop:function(){return D.update(F)}}})};O.test,O.test,O.test,O.test,O.test,O.test;var Ur=function(t){var e=t.from,r=e===void 0?0:e,n=t.velocity,a=n===void 0?0:n,i=t.min,o=t.max,s=t.power,f=s===void 0?.8:s,u=t.timeConstant,d=u===void 0?700:u,m=t.bounceStiffness,y=m===void 0?500:m,w=t.bounceDamping,P=w===void 0?10:w,M=t.restDelta,h=M===void 0?1:M,p=t.modifyTarget;return B(function(v){var b=v.update,A=v.complete,g=r,c=r,l,T=function(E){return i!==void 0&&E<i||o!==void 0&&E>o},F=function(E){return Math.abs(i-E)<Math.abs(o-E)?i:o},V=function(E,G){l&&l.stop(),l=E.start({update:b,complete:function(){if(G){G();return}A()}})},j=function(E){V(ye(C(C({},E),{stiffness:y,damping:P,restDelta:h})))};if(T(r))j({from:r,velocity:a,to:F(r)});else{var S=f*a+r;typeof p<"u"&&(S=p(S),p=void 0,a=(S-r)/f);var $=ge({from:r,velocity:a,timeConstant:d,power:f,restDelta:h,modifyTarget:p}),I=void 0;if(T(S)){var x=F(S),N=x==i?-1:1;$=$.while(function(E){return g=c,a=de(E-g,Or().delta),c=E,x-E*N>0}),I=function(){return j({from:c,to:x,velocity:a})}}V($,I)}return{stop:function(){return l&&l.stop()}}})};O.test,O.test,O.test,O.test,O.test,O.test;var kr=function(t){var e=t.from,r=e===void 0?0:e,n=t.to,a=n===void 0?1:n,i=t.ease,o=i===void 0?Gt:i,s=t.reverseEase,f=s===void 0?!1:s;return f&&(o=xe(o)),B(function(u){var d=u.update;return{seek:function(m){return d(m)}}}).pipe(o,function(u){return et(r,a,u)})},be=rt(kr,{ease:function(t){return typeof t=="function"},from:O.test,to:O.test}),qr=It(0,1),zr=function(t){return t===void 0&&(t={}),B(function(e){var r=e.update,n=e.complete,a=t.duration,i=a===void 0?300:a,o=t.ease,s=o===void 0?Wt:o,f=t.flip,u=f===void 0?0:f,d=t.loop,m=d===void 0?0:d,y=t.yoyo,w=y===void 0?0:y,P=t.repeatDelay,M=P===void 0?0:P,h=t.from,p=h===void 0?0:h,v=t.to,b=v===void 0?1:v,A=t.elapsed,g=A===void 0?0:A,c=t.flipCount,l=c===void 0?0:c,T=t.yoyoCount,F=T===void 0?0:T,V=t.loopCount,j=V===void 0?0:V,S=be({from:p,to:b,ease:s}).start(r),$=0,I,x=!1,N=function(R){var at;R===void 0&&(R=!1),at=[b,p],p=at[0],b=at[1],S=be({from:p,to:b,ease:s,reverseEase:R}).start(r)},E=function(){var R=x&&g>i+M;return R?R&&!m&&!u&&!w?!0:(g=i-(g-M),m&&j<m?(j++,!1):u&&l<u?(l++,N(),!1):w&&F<w?(F++,N(F%2!==0),!1):!0):!1},G=function(){$=qr(Ar(0,i,g)),S.seek($)},nt=function(){x=!0,I=L.update(function(R){var at=R.delta;g+=at,G(),E()&&(D.update(I),n&&L.update(n,!1,!0))},!0)},_=function(){x=!1,I&&D.update(I)};return nt(),{isActive:function(){return x},getElapsed:function(){return It(0,i,g)},getProgress:function(){return $},stop:function(){_()},pause:function(){return _(),this},resume:function(){return x||nt(),this},seek:function(R){return g=et(0,i,R),L.update(G,!1,!0),this},reverse:function(){return N(),this}}})},Kr=function(t){return t===void 0&&(t={}),B(function(e){var r=e.complete,n=e.update,a=t.acceleration,i=a===void 0?0:a,o=t.friction,s=o===void 0?0:o,f=t.velocity,u=f===void 0?0:f,d=t.springStrength,m=t.to,y=t.restSpeed,w=y===void 0?.001:y,P=t.from,M=P===void 0?0:P,h=M,p=L.update(function(v){var b=v.delta,A=Math.max(b,16);if(i&&(u+=jt(i,A)),s&&(u*=Math.pow(1-s,A/100)),d!==void 0&&m!==void 0){var g=m-h;u+=g*jt(d,A)}h+=jt(u,A),n(h);var c=w!==!1&&(!u||Math.abs(u)<=w);c&&(D.update(p),r())},!0);return{set:function(v){return h=v,this},setAcceleration:function(v){return i=v,this},setFriction:function(v){return s=v,this},setSpringStrength:function(v){return d=v,this},setSpringTarget:function(v){return m=v,this},setVelocity:function(v){return u=v,this},stop:function(){return D.update(p)}}})};O.test,O.test,O.test,O.test,O.test,O.test;var we=function(t,e,r){return B(function(n){var a=n.update,i=e.split(" ").map(function(o){return t.addEventListener(o,a,r),o});return{stop:function(){return i.forEach(function(o){return t.removeEventListener(o,a,r)})}}})},Lt=function(){return{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}},Oe=function(t,e){return e===void 0&&(e=Lt()),e.clientX=e.x=t.clientX,e.clientY=e.y=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY,e},Te=[Lt()];if(typeof document<"u"){var Zr=function(t){var e=t.touches,r=e.length;Te.length=0;for(var n=0;n<r;n++){var a=e[n];Te.push(Oe(a))}};we(document,"touchstart touchmove",{passive:!0,capture:!0}).start(Zr)}var Jr=Lt();if(typeof document<"u"){var Qr=function(t){Oe(t,Jr)};we(document,"mousedown mousemove",!0).start(Qr)}const Ce={anticipate:Ie,backIn:ht,backInOut:Fe,backOut:$e,circIn:Xt,circInOut:Se,circOut:Yt,easeIn:pt,easeInOut:Pe,easeOut:Wt,linear:Gt},Y="animateGridId",Dt=(t,e)=>{const{top:r,left:n,width:a,height:i}=e.getBoundingClientRect(),o={top:r,left:n,width:a,height:i};return o.top-=t.top,o.left-=t.left,o.top=Math.max(o.top,0),o.left=Math.max(o.left,0),o},Ae=(t,{translateX:e,translateY:r,scaleX:n,scaleY:a},{immediate:i}={})=>{const o=e===0&&r===0&&n===1&&a===1,s=()=>{t.style.transform=o?"":`translateX(${e}px) translateY(${r}px) scaleX(${n}) scaleY(${a})`};i?s():ut.render(s);const f=t.children[0];if(f){const u=()=>{f.style.transform=o?"":`scaleX(${1/n}) scaleY(${1/a})`};i?u():ut.render(u)}},tn=(t,{duration:e=250,stagger:r=0,easing:n="easeInOut",onStart:a=()=>{},onEnd:i=()=>{}}={})=>{if(!Ce[n])throw new Error(`${n} is not a valid easing name`);let o=!1;const s=h=>{o=!0,h(),setTimeout(()=>{o=!1},0)},f={},u=h=>{const p=t.getBoundingClientRect();Array.from(h).forEach(v=>{if(typeof v.getBoundingClientRect!="function")return;if(!v.dataset[Y]){const g=`${Math.random()}`;v.dataset[Y]=g}const b=v.dataset[Y];f[b]||(f[b]={});const A=Dt(p,v);f[b].rect=A,f[b].gridBoundingClientRect=p})};u(t.children);const d=Zt(()=>{const h=document.querySelector("body"),p=h&&!h.contains(t);(!t||p)&&window.removeEventListener("resize",d),u(t.children)},250);window.addEventListener("resize",d);const m=Zt(()=>{u(t.children)},20);t.addEventListener("scroll",m);const y=h=>{if(h!=="forceGridAnimation"&&(!h.filter(l=>l.attributeName==="class"||l.addedNodes.length||l.removedNodes.length).length||o))return;const p=t.getBoundingClientRect(),v=Array.from(t.children);v.filter(c=>{const l=f[c.dataset[Y]];if(l&&l.stopTween)return l.stopTween(),delete l.stopTween,!0}).forEach(c=>{c.style.transform="";const l=c.children[0];l&&(l.style.transform="")});const b=v.map(c=>({childCoords:{},el:c,boundingClientRect:Dt(p,c)})).filter(({el:c,boundingClientRect:l})=>{const T=f[c.dataset[Y]];if(T){if(l.top===T.rect.top&&l.left===T.rect.left&&l.width===T.rect.width&&l.height===T.rect.height)return!1}else return u([c]),!1;return!0});if(b.forEach(({el:c})=>{if(Array.from(c.children).length>1)throw new Error("Make sure every grid item has a single container element surrounding its children")}),!b.length)return;const A=b.map(({el:c})=>c);s(()=>a(A));const g=[];b.map(c=>{const l=c.el.children[0];return l&&(c.childCoords=Dt(p,l)),c}).forEach(({el:c,boundingClientRect:{top:l,left:T,width:F,height:V},childCoords:{top:j,left:S}},$)=>{const I=c.children[0],x=f[c.dataset[Y]],N={scaleX:x.rect.width/F,scaleY:x.rect.height/V,translateX:x.rect.left-T,translateY:x.rect.top-l};c.style.transformOrigin="0 0",I&&S===T&&j===l&&(I.style.transformOrigin="0 0");let E;const G=new Promise(_=>{E=_});g.push(G),Ae(c,N,{immediate:!0});const nt=()=>{const{stop:_}=zr({from:N,to:{translateX:0,translateY:0,scaleX:1,scaleY:1},duration:e,ease:Ce[n]}).start({update:R=>{Ae(c,R),ut.postRender(()=>u([c]))},complete:E});x.stopTween=_};if(typeof r!="number")nt();else{const _=setTimeout(()=>{ut.update(nt)},r*$);x.stopTween=()=>clearTimeout(_)}}),Promise.all(g).then(()=>{i(A)})},w=new MutationObserver(y);return w.observe(t,{childList:!0,attributes:!0,subtree:!0,attributeFilter:["class"]}),{unwrapGrid:()=>{window.removeEventListener("resize",d),t.removeEventListener("scroll",m),w.disconnect()},forceGridAnimation:()=>y("forceGridAnimation")}};var Bt=window.Phazor??(window.Phazor={});Bt.subscribeOnScrollFinished=function(t,e){const r=document.getElementById(t);r.addEventListener("scroll",async()=>{r.scrollHeight-r.offsetHeight-r.scrollTop<1&&await e.invokeMethodAsync("OnScrollFinished")})},Bt.isContentFillingParent=function(t){const e=document.getElementById(t);return e.offsetHeight<e.scrollHeight},Bt.wrapGrid=function(t){const e=document.getElementById(t);tn(e)}});
